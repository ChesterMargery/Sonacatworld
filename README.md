# AI 小镇 (Sonacatworld)

> 基于 **LLM + WebGPU** 的多智能体社会模拟系统

## 📖 项目介绍

AI 小镇是一个创新的社会仿真系统，结合了大语言模型（LLM）的多人格异步调用能力和 WebGPU 的并行计算性能，构建了一个包含经济、农业、资源采集、人物行为与社交博弈的 AI 驱动小镇。

### 核心特性

- **LLM 多人格系统**：单一大模型分裂为多个独立人格，每个 AI 角色拥有独立上下文与记忆
- **WebGPU 并行计算**：利用 GPU 加速实现高性能的仿真计算与渲染
- **完整生态闭环**：生产 → 采集 → 交易 → 生存 → 社交 → 博弈 → 记忆 → 决策演化

## 🎮 系统模块

### 1. 经济系统（杂货铺）
- 唯一的交易中心
- 可交易物品：农作物（小麦、大米、萝卜、甜菜）、鱼类（5种）、矿物（4种）
- AI 通过卖资源换取金钱，用金钱购买食物和种子

### 2. 农业系统
- 4种作物：小麦、大米、萝卜、甜菜（各有对应种子）
- 完整流程：播种 → 生长 → 收获 → 消费或出售
- 每种作物具有不同的生长时间、饥饿恢复值和市场售价

### 3. 钓鱼系统
- 5种鱼类，不同稀有度
- 随机算法 + 资源池抽取机制
- 5个等级的饥饿恢复梯度
- 可选择食用恢复饥饿或出售换钱

### 4. 挖矿系统
- 4种矿物资源
- 矿场维护资源池，挖矿消耗矿场库存
- 矿物主要用于出售获取金钱

### 5. 人物属性系统
- **饥饿值（Hunger）**：随时间下降，进食恢复
- **金钱（Money）**：经济核心约束资源
- **年龄（Age）**：游戏时长换算（1小时 = 1岁）

### 6. 人物行为系统（10+种行为）
基础行为包括：
- 睡觉、起床、行走
- 钓鱼、挖矿、种植
- 买东西、卖东西、吃东西
- 对话、参加礼堂活动

所有行为由 LLM 基于饥饿值、金钱、时间和人格目标进行决策驱动

### 7. 礼堂系统（社交与博弈）
- **活动类型**：
  - 狼人杀（阵营推理）
  - 剧本杀（身份与记忆博弈）
  - 信息讨论会
- **作用**：建立关系记忆（信任/怀疑/敌对），影响后续对话与合作

### 8. LLM 分裂系统（多人格异步）
- 单一大模型 + 多角色人格 Prompt 分裂
- 每个 AI 独立上下文与记忆
- 异步调用进行行为决策
- 包含：人格设定、状态输入、世界信息、行为输出

## 🛠 技术栈

- **前端框架**：TypeScript + Vite
- **渲染引擎**：WebGPU（并行计算与渲染）
- **AI 决策**：LLM 多智能体系统
- **开发工具**：ESLint + Prettier

## 🚀 快速开始

### 安装依赖

```bash
npm install
```

### 启动开发服务器

```bash
npm run dev
```

### 构建生产版本

```bash
npm run build
```

### 预览生产版本

```bash
npm run preview
```

## 📁 项目结构

```
Sonacatworld/
├── src/                    # 源代码
│   ├── core/              # 核心引擎
│   ├── systems/           # 功能系统
│   │   ├── economy/       # 经济系统
│   │   ├── farming/       # 农业系统
│   │   ├── fishing/       # 钓鱼系统
│   │   ├── mining/        # 挖矿系统
│   │   ├── character/     # 人物系统
│   │   ├── social/        # 社交系统
│   │   └── llm/           # LLM系统
│   ├── webgpu/            # WebGPU渲染
│   └── utils/             # 工具函数
├── docs/                  # 文档
│   ├── design.md          # 完整策划案
│   ├── architecture.md    # 技术架构
│   └── systems/           # 各系统设计文档
├── tests/                 # 测试目录
└── public/                # 静态资源
```

## 📚 文档

- [完整策划案](./docs/design.md)
- [技术架构](./docs/architecture.md)
- [系统设计文档](./docs/systems/)

## 🎯 项目目标

构建最小完整闭环的 AI 社会系统，形成可观察的：

- **经济循环**：生产、交易、消费的动态平衡
- **行为分化**：不同人格 AI 展现差异化行为模式
- **社交冲突**：信任、合作、背叛的复杂人际关系
- **人格涌现**：长期交互中涌现的独特个性特征

## 📄 License

MIT

## 👥 Author

ChesterMargery